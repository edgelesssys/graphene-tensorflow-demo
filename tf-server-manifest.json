{
    "Packages": {
        "tensorflow-package": {
            "Debug": true,
            "SignerID": "43361affedeb75affee9baec7e054a5e14883213e5a121b67d74a0e12e9d2b7a",
            "ProductID": 15,
            "SecurityVersion": 1
        }
    },
    "Marbles": {
        "tf-server": {
            "Package": "tensorflow-package",
            "Parameters": {
                "Argv": [
                    "tensorflow_model_server",
                    "--model_name=resnet50",
                    "--model_base_path=/models/resnet50-v15-fp32",
                    "--port=8500",
                    "--rest_api_port=8501",
                    "--enable_model_warmup=true",
                    "--flush_filesystem_caches=false",
                    "--enable_batching=false",
                    "--ssl_config_file=ssl.cfg",
                    "--rest_api_num_threads=8",
                    "--tensorflow_session_parallelism=0",
                    "--tensorflow_intra_op_parallelism=0",
                    "--tensorflow_inter_op_parallelism=0",
                    "--file_system_poll_wait_seconds=10"
                ],
                "Files": {
                    "ssl.cfg": "server_key: '-----BEGIN PRIVATE KEY-----\\n{{ base64 .Marblerun.MarbleCert.Private }}\\n-----END PRIVATE KEY-----'\nserver_cert: '-----BEGIN CERTIFICATE-----\\n{{ base64 .Marblerun.MarbleCert.Cert }}\\n-----END CERTIFICATE-----'\nclient_verify: false",
                    "/dev/attestation/protected_files_key": "{{ hex .Secrets.pf_key }}"
                }
            }
        }
    },
    "Secrets": {
        "pf_key": {
            "Type": "symmetric-key",
            "Size": 128,
            "UserDefined": true
        }
    },
    "Users": {
        "tf-admin": {
            "Certificate": "USER_CERT",
            "Roles": [
                "secret-manager"
            ]
        }
    },
    "Roles": {
        "secret-manager": {
            "ResourceType": "Secrets",
            "ResourceNames": [
                "pf_key"
            ],
            "Actions": [
                "WriteSecret",
                "ReadSecret"
            ]
        }
    }
}
